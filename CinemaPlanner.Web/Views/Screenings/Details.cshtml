@model CinemaPlanner.Web.Models.ScreeningDetailsViewModel
@{
    ViewData["Title"] = "Screening Details";
}

<h1>Details</h1>

<div>
    <dl class="row">
        <dt class="col-sm-2">Movie</dt>
        <dd class="col-sm-10">@Model.Screening.Movie?.Title</dd>

        <dt class="col-sm-2">Hall</dt>
        <dd class="col-sm-10">@Model.Screening.Hall?.Name</dd>

        <dt class="col-sm-2">Start Time</dt>
        <dd class="col-sm-10">@Model.Screening.TimeLabel</dd>
    </dl>
</div>

<h3>Seat Map</h3>
<p class="text-muted">Legend: O = open, X = reserved placeholder, - = aisle</p>
<div class="table-responsive">
    <table class="table table-bordered table-sm align-middle text-center">
        <tbody>
        @for (int r = 0; r < Model.SeatMatrix.GetLength(0); r++)
        {
            <tr>
                @for (int c = 0; c < Model.SeatMatrix.GetLength(1); c++)
                {
                    var status = Model.SeatMatrix[r, c];
                    var label = Model.SeatLabels[r][c];
                    var css = status switch
                    {
                        'X' => "table-danger",
                        '-' => "table-secondary",
                        _ => "table-success"
                    };
                    <td class="@css">
                        <div class="fw-bold">@label</div>
                        <div class="small">@status</div>
                    </td>
                }
            </tr>
        }
        </tbody>
    </table>
</div>
<p>
    <a asp-action="Edit" asp-route-id="@Model.Screening.Id">Edit</a> |
    <a asp-action="Index">Back to List</a>
</p>
